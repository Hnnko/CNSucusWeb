<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagina Ventas CN Sucus</title>
    <link href="/src/output.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/crud.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="text/javascript" src="/js/sidebar.js" defer></script>
</head>
<body>
    <nav id="sidebar">
        <ul>
            <li>
                <span class="logo">CN Sucus</span>
                <button onclick=toggleSidebar() id="toggle-btn">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m313-480 155 156q11 11 11.5 27.5T468-268q-11 11-28 11t-28-11L228-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T468-692q11 11 11 28t-11 28L313-480Zm264 0 155 156q11 11 11.5 27.5T732-268q-11 11-28 11t-28-11L492-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T732-692q11 11 11 28t-11 28L577-480Z"/></svg>
                </button>
            </li>
            <li>
                <a href="/">
                <img src="/src/sidebar-icons/main-icon.png" width="32px" height="32px" style="filter: invert(1);"/>
                <span>Inicio</span>
                </a>
            </li>
            <li>
                <a href="/dashboard">
                <img src="/src/sidebar-icons/dashboard-icon.png" width="32px" height="32px" style="filter: invert(1);"/>
                <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="/sell">
                <img src="/src/sidebar-icons/sells-icon.png" width="32px" height="32px" style="filter: invert(1);"/>
                <span>Ventas</span>
                </a>
            </li>
            <li>
                <a href="/client">
                <img src="/src/sidebar-icons/clients-icon.png" width="32px" height="32px" style="filter: invert(1);"/>
                <span>Clientes</span>
                </a>
            </li>
            <li>
                <a href="/product">
                <img src="/src/sidebar-icons/products-icon.png" width="32px" height="32px" style="filter: invert(1);"/>
                <span>Productos</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <main class="content-container">
        <div class="container">
            <header>
                <div class="filterEntries">
                    <div class="entries">
                        <span>Mostrar</span>
                        <select name="" id="table_size">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="15">15</option>
                            <option value="20">20</option>
                        </select>
                        <span>entradas</span>
                    </div>
                    <div class="filter">
                        <label for="search">Buscar:</label>
                        <input type="search" name="" id="search">
                    </div>
                </div>
                <div class="addMemberBtn">
                    <button>Agregar Venta</button>
                </div>
            </header>

            <table>
                <thead>
                    <tr class="heading">
                        <th>#</th>
                        <th>Código Venta</th>
                        <th>Codigo Cliente</th>
                        <th>Cliente</th>
                        <th>Fecha Venta</th>
                        <th>Metodo de Pago</th>
                        <th>Producto/s</th>
                        <th>Monto Neto</th>
                        <th>IVA</th>
                        <th>Total</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody class="userInfo">
                    <!-- Datos de ventas se cargarán aquí -->
                </tbody>
            </table>

            <footer>
                <span class="showEntries">Mostrando 1 a 10 de 100 entradas</span>
                <div class="pagination">
                    <!-- Botones de paginación se generarán aquí -->
                </div>
            </footer>
        </div>

        <!-- Formulario emergente para agregar/editar ventas -->
        <div class="dark_bg">
            <div class="popup">
                <header>
                    <h2 class="modalTitle">Formulario de Venta</h2>
                    <button class="closeBtn">&times;</button>
                </header>
                <form>
                    <div class="inputFieldContainer">
                        <div class="form_control">
                            <label for="saleCode">Codigo Venta</label>
                            <input type="text" id="saleCode" readonly style="background-color: #f0f0f0;">
                        </div>
                        <div class="form_control">
                            <label for="clientSelect">Cliente</label>
                            <select id="clientSelect" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="">Seleccionar cliente...</option>
                            </select>
                        </div>
                        <div class="form_control">
                            <label for="saleDate">Fecha Venta</label>
                            <input type="date" id="saleDate" required>
                        </div>
                        <div class="form_control">
                            <label for="salePaymentMethod">Metodo de Pago</label>
                            <select id="salePaymentMethod" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="">Seleccionar metodo de pago...</option>
                                <option value="efectivo">Efectivo</option>
                                <option value="tarjeta">Tarjeta</option>
                                <option value="transferencia">Transferencia</option>
                            </select>
                        </div>
                        <!-- Carrito de Compras -->
                        <div class="form_control">
                            <label>Productos</label>
                            <div style="display: flex; gap: 10px; align-items: end; margin-bottom: 10px;">
                                <div style="flex: 1;">
                                    <label for="productSelect">Producto</label>
                                    <select id="productSelect" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                        <option value="">Seleccionar producto...</option>
                                    </select>
                                </div>
                                <div style="width: 100px;">
                                    <label for="productQuantity">Cantidad</label>
                                    <input type="number" id="productQuantity" min="1" value="1" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                </div>
                                <button type="button" id="addProductBtn" style="padding: 10px 15px; background: var(--accent); color: white; border: none; border-radius: 5px; cursor: pointer;">Agregar</button>
                            </div>
                            
                            <!-- Tabla del carrito -->
                            <div id="cartContainer" style="margin-top: 15px;">
                                <table id="cartTable" style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                                    <thead>
                                        <tr style="background: #f5f5f5;">
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: left;">Código</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: left;">Producto</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">Cantidad</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: right;">Precio Unit.</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: right;">Subtotal</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="cartBody">
                                        <tr id="emptyCartRow">
                                            <td colspan="6" style="padding: 20px; text-align: center; color: #666;">No hay productos en el carrito</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Campo oculto para enviar los productos -->
                            <input type="hidden" id="saleProducts" name="saleProducts">
                        </div>
                        
                        <!-- Campos de montos (solo lectura) -->
                        <div class="form_control">
                            <label for="saleNetAmount">Monto Neto</label>
                            <input type="number" id="saleNetAmount" readonly style="background: #f5f5f5;">
                        </div>
                        <div class="form_control">
                            <label for="saleIvaAmount">IVA (19%)</label>
                            <input type="number" id="saleIvaAmount" readonly style="background: #f5f5f5;">
                        </div>
                        <div class="form_control">
                            <label for="saleTotalAmount">Total</label>
                            <input type="number" id="saleTotalAmount" readonly style="background: #f5f5f5;">
                        </div>
                    </div>
                    <footer class="popupFooter">
                        <button type="submit" class="submitBtn">Guardar</button>
                    </footer>
                </form>
            </div>
        </div>
    </main>

    <script src="/js/sell-crud.js"></script>
</body>
</html>